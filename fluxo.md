# ğŸ¨ Fluxo Visual - RecuperaÃ§Ã£o de Senha

## ğŸ“± Jornada do UsuÃ¡rio

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TELA DE LOGIN                                 â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  Email: [________________]                        â”‚           â”‚
â”‚  â”‚  Senha: [________________]                        â”‚           â”‚
â”‚  â”‚                                                    â”‚           â”‚
â”‚  â”‚  [         Entrar          ]                      â”‚           â”‚
â”‚  â”‚                                                    â”‚           â”‚
â”‚  â”‚  >>> Esqueci minha senha <<<  ğŸ‘ˆ USUÃRIO CLICA    â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              TELA DE RECUPERAÃ‡ÃƒO - PASSO 1                       â”‚
â”‚                                                                  â”‚
â”‚  Informe seu email para receber o cÃ³digo                        â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  Email: [usuario@empresa.com___]                 â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                  â”‚
â”‚  [         Enviar          ]  ğŸ‘ˆ USUÃRIO CLICA                  â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    VALIDAÃ‡ÃƒO FRONTEND                            â”‚
â”‚                                                                  â”‚
â”‚  âœ“ Campo vazio?           â”€â”€â”€â”€â”€â”€â”€â”€â–º âŒ Erro: "Informe email"    â”‚
â”‚  âœ“ Formato vÃ¡lido?        â”€â”€â”€â”€â”€â”€â”€â”€â–º âŒ Erro: "Email invÃ¡lido"   â”‚
â”‚  âœ“ Formato OK             â”€â”€â”€â”€â”€â”€â”€â”€â–º âœ… Continua                 â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CHAMADA API #1                                â”‚
â”‚                                                                  â”‚
â”‚  GET /auth/verify-email?email=usuario@empresa.com               â”‚
â”‚                                                                  â”‚
â”‚  BACKEND VERIFICA NO BANCO:                                      â”‚
â”‚  SELECT * FROM usuarios WHERE email = 'usuario@empresa.com'     â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  Existe?        â”‚â”€â”€â”€ SIM â”€â”€â”€â–º  â”‚ {exists: true}  â”‚           â”‚
â”‚  â”‚                 â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚  â”‚                 â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚                 â”‚â”€â”€â”€ NÃƒO â”€â”€â”€â–º  â”‚ {exists: false} â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                    â”‚
               EXISTE                NÃƒO EXISTE
                    â”‚                    â”‚
                    â–¼                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Continua...     â”‚  â”‚  MOSTRA ERRO         â”‚
        â”‚                  â”‚  â”‚  "Email nÃ£o          â”‚
        â”‚                  â”‚  â”‚   encontrado"        â”‚
        â”‚                  â”‚  â”‚                      â”‚
        â”‚                  â”‚  â”‚  PARA AQUI âŒ        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CHAMADA API #2                                â”‚
â”‚                                                                  â”‚
â”‚  POST /auth/password-recovery                                    â”‚
â”‚  Body: { "email": "usuario@empresa.com" }                       â”‚
â”‚                                                                  â”‚
â”‚  BACKEND:                                                        â”‚
â”‚  1. Gera cÃ³digo: 123456                                          â”‚
â”‚  2. Salva no banco com expiraÃ§Ã£o de 15 min                       â”‚
â”‚  3. Envia email                                                  â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    EMAIL ENVIADO                                 â”‚
â”‚                                                                  â”‚
â”‚  Para: usuario@empresa.com                                       â”‚
â”‚  Assunto: RecuperaÃ§Ã£o de Senha                                   â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ OlÃ¡, JoÃ£o                                  â”‚                 â”‚
â”‚  â”‚                                            â”‚                 â”‚
â”‚  â”‚ Seu cÃ³digo de recuperaÃ§Ã£o Ã©:               â”‚                 â”‚
â”‚  â”‚                                            â”‚                 â”‚
â”‚  â”‚          [ 1 2 3 4 5 6 ]                   â”‚                 â”‚
â”‚  â”‚                                            â”‚                 â”‚
â”‚  â”‚ VÃ¡lido por 15 minutos                      â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              TELA DE RECUPERAÃ‡ÃƒO - PASSO 2                       â”‚
â”‚                                                                  â”‚
â”‚  Digite o cÃ³digo enviado para seu email                          â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  CÃ³digo: [_ _ _ _ _ _]                           â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                  â”‚
â”‚  [        Validar CÃ³digo        ]                               â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              TELA DE RECUPERAÃ‡ÃƒO - PASSO 3                       â”‚
â”‚                                                                  â”‚
â”‚  Digite sua nova senha                                           â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  Nova Senha: [________________]                  â”‚           â”‚
â”‚  â”‚  Confirmar:  [________________]                  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                  â”‚
â”‚  [     Alterar Senha     ]                                      â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    âœ… SENHA ALTERADA!
```

---

## ğŸ”„ Diagrama de SequÃªncia TÃ©cnico

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UsuÃ¡rio â”‚  â”‚  UI  â”‚  â”‚ ViewModel â”‚  â”‚Datasourceâ”‚  â”‚ Backend  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚           â”‚            â”‚             â”‚             â”‚
     â”‚ Digita    â”‚            â”‚             â”‚             â”‚
     â”‚  email    â”‚            â”‚             â”‚             â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º            â”‚             â”‚             â”‚
     â”‚           â”‚            â”‚             â”‚             â”‚
     â”‚ Clica     â”‚            â”‚             â”‚             â”‚
     â”‚ "Enviar"  â”‚            â”‚             â”‚             â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º            â”‚             â”‚             â”‚
     â”‚           â”‚            â”‚             â”‚             â”‚
     â”‚           â”‚sendPasswordâ”‚             â”‚             â”‚
     â”‚           â”‚ Recover()  â”‚             â”‚             â”‚
     â”‚           â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º             â”‚             â”‚
     â”‚           â”‚            â”‚             â”‚             â”‚
     â”‚           â”‚            â”‚ 1. Valida  â”‚             â”‚
     â”‚           â”‚            â”‚   formato  â”‚             â”‚
     â”‚           â”‚            â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–º   â”‚             â”‚
     â”‚           â”‚            â”‚            â”‚             â”‚
     â”‚           â”‚            â”‚ 2. verify  â”‚             â”‚
     â”‚           â”‚            â”‚   Email()  â”‚             â”‚
     â”‚           â”‚            â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º             â”‚
     â”‚           â”‚            â”‚            â”‚             â”‚
     â”‚           â”‚            â”‚            â”‚ GET /auth   â”‚
     â”‚           â”‚            â”‚            â”‚ /verify-    â”‚
     â”‚           â”‚            â”‚            â”‚  email      â”‚
     â”‚           â”‚            â”‚            â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
     â”‚           â”‚            â”‚            â”‚             â”‚
     â”‚           â”‚            â”‚            â”‚ SELECT FROM â”‚
     â”‚           â”‚            â”‚            â”‚  usuarios   â”‚
     â”‚           â”‚            â”‚            â”‚             â”‚
     â”‚           â”‚            â”‚            â”‚{exists:true}â”‚
     â”‚           â”‚            â”‚            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     â”‚           â”‚            â”‚            â”‚             â”‚
     â”‚           â”‚            â”‚   true     â”‚             â”‚
     â”‚           â”‚            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”‚
     â”‚           â”‚            â”‚            â”‚             â”‚
     â”‚           â”‚            â”‚ 3. send    â”‚             â”‚
     â”‚           â”‚            â”‚  Recovery  â”‚             â”‚
     â”‚           â”‚            â”‚  Email()   â”‚             â”‚
     â”‚           â”‚            â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º             â”‚
     â”‚           â”‚            â”‚            â”‚             â”‚
     â”‚           â”‚            â”‚            â”‚POST /auth   â”‚
     â”‚           â”‚            â”‚            â”‚/password-   â”‚
     â”‚           â”‚            â”‚            â”‚ recovery    â”‚
     â”‚           â”‚            â”‚            â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
     â”‚           â”‚            â”‚            â”‚             â”‚
     â”‚           â”‚            â”‚            â”‚ 1. Gera     â”‚
     â”‚           â”‚            â”‚            â”‚   cÃ³digo    â”‚
     â”‚           â”‚            â”‚            â”‚             â”‚
     â”‚           â”‚            â”‚            â”‚ 2. Salva no â”‚
     â”‚           â”‚            â”‚            â”‚    banco    â”‚
     â”‚           â”‚            â”‚            â”‚             â”‚
     â”‚           â”‚            â”‚            â”‚ 3. Envia    â”‚
     â”‚           â”‚            â”‚            â”‚    email    â”‚
     â”‚           â”‚            â”‚            â”‚             â”‚
     â”‚           â”‚            â”‚            â”‚ {success:   â”‚
     â”‚           â”‚            â”‚            â”‚   true}     â”‚
     â”‚           â”‚            â”‚            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     â”‚           â”‚            â”‚            â”‚             â”‚
     â”‚           â”‚            â”‚   true     â”‚             â”‚
     â”‚           â”‚            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”‚
     â”‚           â”‚            â”‚            â”‚             â”‚
     â”‚           â”‚            â”‚ 4. Muda    â”‚             â”‚
     â”‚           â”‚            â”‚   estado   â”‚             â”‚
     â”‚           â”‚            â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–º   â”‚             â”‚
     â”‚           â”‚            â”‚            â”‚             â”‚
     â”‚           â”‚ Atualiza   â”‚            â”‚             â”‚
     â”‚           â”‚    UI      â”‚            â”‚             â”‚
     â”‚           â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”‚             â”‚
     â”‚           â”‚            â”‚            â”‚             â”‚
     â”‚ Mostra    â”‚            â”‚            â”‚             â”‚
     â”‚ prÃ³xima   â”‚            â”‚            â”‚             â”‚
     â”‚  tela     â”‚            â”‚            â”‚             â”‚
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”‚            â”‚             â”‚
     â”‚           â”‚            â”‚            â”‚             â”‚
```

---

## âš ï¸ Fluxos de Erro

### Erro 1: Email InvÃ¡lido (ValidaÃ§Ã£o Frontend)

```
UsuÃ¡rio digita: "emailsemarroba"
         â”‚
         â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  ViewModel  â”‚
   â”‚  valida     â”‚ â”€â”€â”€â–º isValidEmail() â”€â”€â”€â–º FALSE
   â”‚  formato    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  errorMsg = â”‚
   â”‚  "Email     â”‚
   â”‚   invÃ¡lido" â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  UI mostra  â”‚
   â”‚  erro com   â”‚
   â”‚  borda      â”‚
   â”‚  vermelha   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    PARA AQUI âŒ
   (nÃ£o faz chamada API)
```

### Erro 2: Email NÃ£o Cadastrado

```
UsuÃ¡rio digita: "naoexiste@test.com"
         â”‚
         â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Formato OK â”‚ âœ“
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚GET /verify  â”‚
   â”‚   -email    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Backend:   â”‚
   â”‚  SELECT...  â”‚
   â”‚  COUNT = 0  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Response:  â”‚
   â”‚{exists:false}â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  errorMsg = â”‚
   â”‚  "Email nÃ£o â”‚
   â”‚  encontrado"â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  UI mostra  â”‚
   â”‚  erro       â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    PARA AQUI âŒ
   (nÃ£o envia email)
```

### Erro 3: Limite de Tentativas Excedido

```
UsuÃ¡rio jÃ¡ tentou 3x em 1 hora
         â”‚
         â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Formato OK â”‚ âœ“
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Email      â”‚ âœ“
   â”‚  existe     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚POST         â”‚
   â”‚/password-   â”‚
   â”‚ recovery    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Backend:   â”‚
   â”‚  Verifica   â”‚
   â”‚  tentativas â”‚
   â”‚  = 3        â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Response:  â”‚
   â”‚  429 TOO    â”‚
   â”‚  MANY       â”‚
   â”‚  REQUESTS   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  errorMsg = â”‚
   â”‚  "Limite    â”‚
   â”‚  excedido"  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    PARA AQUI âŒ
   (aguardar 1 hora)
```

---

## ğŸ¯ Estados da AplicaÃ§Ã£o

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         PASSWORD RECOVER STATE MACHINE          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ SendingPasswordRecoverRequest    â”‚ â—„â”€â”€ Estado Inicial
     â”‚                                  â”‚
     â”‚ - Campo de email                 â”‚
     â”‚ - ValidaÃ§Ã£o                      â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                     â”‚
      SUCESSO               ERRO
         â”‚                     â”‚
         â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚SendingPassword  â”‚    â”‚ Permanece   â”‚
â”‚RecoverCodeState â”‚    â”‚ no mesmo    â”‚
â”‚                 â”‚    â”‚ estado com  â”‚
â”‚ - Campo cÃ³digo  â”‚    â”‚ errorMsg    â”‚
â”‚ - ValidaÃ§Ã£o     â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
      SUCESSO
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚CreatingNewPass  â”‚
â”‚wordState        â”‚
â”‚                 â”‚
â”‚ - Nova senha    â”‚
â”‚ - ConfirmaÃ§Ã£o   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Tabelas no Banco

### Estrutura de Dados

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             TABELA: usuarios                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id           â”‚ INTEGER       â”‚ PRIMARY KEY      â”‚
â”‚ nome         â”‚ VARCHAR(255)  â”‚                  â”‚
â”‚ email        â”‚ VARCHAR(255)  â”‚ UNIQUE, INDEXED  â”‚
â”‚ senha_hash   â”‚ VARCHAR(255)  â”‚                  â”‚
â”‚ ativo        â”‚ BOOLEAN       â”‚ DEFAULT true     â”‚
â”‚ deletado     â”‚ BOOLEAN       â”‚ DEFAULT false    â”‚
â”‚ created_at   â”‚ TIMESTAMP     â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â–²
              â”‚ (FK)
              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       TABELA: password_reset_codes              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id           â”‚ SERIAL        â”‚ PRIMARY KEY      â”‚
â”‚ user_id      â”‚ INTEGER       â”‚ FK -> usuarios   â”‚
â”‚ codigo       â”‚ VARCHAR(6)    â”‚ "123456"         â”‚
â”‚ expira_em    â”‚ TIMESTAMP     â”‚ NOW() + 15min    â”‚
â”‚ ativo        â”‚ BOOLEAN       â”‚ DEFAULT true     â”‚
â”‚ created_at   â”‚ TIMESTAMP     â”‚ NOW()            â”‚
â”‚ used_at      â”‚ TIMESTAMP     â”‚ NULL             â”‚
â”‚ ip_address   â”‚ VARCHAR(45)   â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   TABELA: auditoria_recuperacao_senha           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id           â”‚ SERIAL        â”‚ PRIMARY KEY      â”‚
â”‚ acao         â”‚ VARCHAR(50)   â”‚ "VERIFICACAO_..." â”‚
â”‚ user_id      â”‚ INTEGER       â”‚ FK -> usuarios   â”‚
â”‚ email        â”‚ VARCHAR(255)  â”‚                  â”‚
â”‚ ip_address   â”‚ VARCHAR(45)   â”‚                  â”‚
â”‚ success      â”‚ BOOLEAN       â”‚                  â”‚
â”‚ created_at   â”‚ TIMESTAMP     â”‚ NOW()            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Exemplo de Dados

```
password_reset_codes:
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ user_id â”‚ codigo â”‚ expira_em           â”‚ ativo â”‚ created_at          â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1 â”‚   123   â”‚ 456789 â”‚ 2025-10-29 14:45:00 â”‚ true  â”‚ 2025-10-29 14:30:00 â”‚
â”‚  2 â”‚   123   â”‚ 123456 â”‚ 2025-10-29 15:00:00 â”‚ false â”‚ 2025-10-29 14:45:00 â”‚â—„â”€ Invalidado
â”‚  3 â”‚   123   â”‚ 789012 â”‚ 2025-10-29 15:15:00 â”‚ true  â”‚ 2025-10-29 15:00:00 â”‚â—„â”€ Ativo atual
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”’ Camadas de SeguranÃ§a

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SEGURANÃ‡A EM CAMADAS                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Camada 1: VALIDAÃ‡ÃƒO FRONTEND
â”œâ”€ Formato de email (RegEx)
â”œâ”€ Campo nÃ£o vazio
â””â”€ Feedback imediato ao usuÃ¡rio
         â”‚
         â–¼
Camada 2: VERIFICAÃ‡ÃƒO NO BANCO
â”œâ”€ Email existe?
â”œâ”€ UsuÃ¡rio ativo?
â””â”€ NÃ£o revela informaÃ§Ãµes sensÃ­veis
         â”‚
         â–¼
Camada 3: RATE LIMITING
â”œâ”€ MÃ¡ximo 3 tentativas por hora
â”œâ”€ ProteÃ§Ã£o contra spam
â””â”€ ProteÃ§Ã£o contra forÃ§a bruta
         â”‚
         â–¼
Camada 4: CÃ“DIGO TEMPORÃRIO
â”œâ”€ Expira em 15 minutos
â”œâ”€ CÃ³digos antigos invalidados
â””â”€ Uso Ãºnico
         â”‚
         â–¼
Camada 5: AUDITORIA
â”œâ”€ Log de todas tentativas
â”œâ”€ IP tracking
â””â”€ AnÃ¡lise de padrÃµes suspeitos
```

---

## ğŸ“ Resumo Final

### O que o Frontend faz:
âœ… Valida formato do email  
âœ… Verifica se email existe (via API)  
âœ… Envia solicitaÃ§Ã£o de recuperaÃ§Ã£o (via API)  
âœ… Mostra feedback claro ao usuÃ¡rio  
âœ… Gerencia estados da aplicaÃ§Ã£o  

### O que o Backend precisa fazer:
â³ Endpoint GET /auth/verify-email  
â³ Endpoint POST /auth/password-recovery  
â³ Tabela password_reset_codes  
â³ Sistema de envio de email  
â³ Rate limiting (3 tentativas/hora)  
â³ Logs de auditoria  

---

**DocumentaÃ§Ã£o criada em:** 29/10/2025  
**VersÃ£o:** 1.0

